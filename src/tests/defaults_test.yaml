---
suite: Defaults without overrides
templates:
  - templates/workspace.yaml
release:
  name: my-release
  namespace: my-namespace
tests:
  - it: should render default Deployment
    documentSelector:
      path: kind
      value: Deployment
    asserts:
      - matchSnapshot:
          path: spec

  - it: should render default Service
    documentSelector:
      path: kind
      value: Service
    asserts:
      - matchSnapshot:
          path: spec

  - it: should render default PVC
    documentSelector:
      path: kind
      value: PersistentVolumeClaim
    asserts:
      - matchSnapshot:
          path: spec

  - it: should create 3 documents by default
    asserts:
      - hasDocuments:
          count: 3

  - it: should not set owner, project, or firewall labels by default
    documentSelector:
      path: kind
      value: Deployment
    asserts:
      - notExists:
          path: metadata.labels["ws.kloudkit.com/owner"]
      - notExists:
          path: metadata.labels["ws.kloudkit.com/project"]
      - notExists:
          path: metadata.labels["ws.kloudkit.com/firewall"]
